# 6FB Workbook System - Production Environment Configuration
# Copy this file to .env.production and fill in your actual values

# =============================================================================
# Application Configuration
# =============================================================================
NODE_ENV=production
PORT=3000
NEXT_PUBLIC_APP_URL=https://workbook.6fbmethodologies.com

# =============================================================================
# Database Configuration
# =============================================================================
DATABASE_URL=postgresql://workbook_user:your_secure_password@localhost:5432/workbook_db
POSTGRES_PASSWORD=your_secure_password

# =============================================================================
# Redis Configuration
# =============================================================================
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=your_redis_password

# =============================================================================
# Authentication & Security
# =============================================================================
JWT_SECRET=your_super_secure_jwt_secret_key_at_least_32_characters_long
JWT_EXPIRES_IN=15m
REFRESH_TOKEN_EXPIRES_IN=7d

# CORS Configuration
CORS_ORIGIN=https://6fbmethodologies.com,https://workbook.6fbmethodologies.com

# Rate Limiting
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW_MS=900000

# =============================================================================
# External APIs
# =============================================================================

# OpenAI API for audio transcription
OPENAI_API_KEY=sk-your_openai_api_key_here

# Stripe for payments
STRIPE_SECRET_KEY=sk_live_your_stripe_secret_key
STRIPE_PUBLISHABLE_KEY=pk_live_your_stripe_publishable_key
STRIPE_WEBHOOK_SECRET=whsec_your_stripe_webhook_secret

# =============================================================================
# AWS S3 Configuration
# =============================================================================
AWS_ACCESS_KEY_ID=your_aws_access_key_id
AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key
AWS_S3_BUCKET=6fb-workbook-audio-files
AWS_REGION=us-east-1

# =============================================================================
# Email Configuration
# =============================================================================
SENDGRID_API_KEY=SG.your_sendgrid_api_key
FROM_EMAIL=noreply@6fbmethodologies.com

# =============================================================================
# Monitoring & Analytics
# =============================================================================

# Sentry for error monitoring
SENTRY_DSN=https://your_sentry_dsn_here

# Analytics
NEXT_PUBLIC_ANALYTICS_ID=your_analytics_id
ANALYTICS_API_SECRET=your_analytics_api_secret

# =============================================================================
# Third-party Integrations
# =============================================================================

# Twilio for SMS (optional)
TWILIO_ACCOUNT_SID=your_twilio_account_sid
TWILIO_AUTH_TOKEN=your_twilio_auth_token
TWILIO_PHONE_NUMBER=+1234567890

# Zapier webhooks (optional)
ZAPIER_WEBHOOK_URL=https://hooks.zapier.com/hooks/catch/your_hook_id

# =============================================================================
# Monitoring Configuration (Optional)
# =============================================================================
GRAFANA_PASSWORD=your_grafana_admin_password

# Slack notifications (optional)
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/your/slack/webhook

# =============================================================================
# Development & Debugging (Set to false in production)
# =============================================================================
NEXT_TELEMETRY_DISABLED=1
DEBUG_MODE=false
VERBOSE_LOGGING=false

# =============================================================================
# Performance Configuration
# =============================================================================

# Next.js Configuration
NEXT_SHARP=true
NEXT_EXPERIMENTAL_OPTIMISTIC_CLIENT_CACHE=true

# Cache Configuration
CACHE_TTL=3600
STATIC_CACHE_TTL=86400

# =============================================================================
# Security Headers
# =============================================================================
CONTENT_SECURITY_POLICY="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' https:; connect-src 'self' https: wss:; media-src 'self' https:;"

# =============================================================================
# Backup Configuration
# =============================================================================
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=6fb-workbook-backups

# =============================================================================
# Load Balancing & Clustering (for multi-instance deployments)
# =============================================================================
CLUSTER_MODE=false
MAX_WORKERS=4
LOAD_BALANCER_IP=127.0.0.1

# =============================================================================
# Logging Configuration
# =============================================================================
LOG_LEVEL=info
LOG_FORMAT=json
LOG_MAX_SIZE=100mb
LOG_MAX_FILES=10

# =============================================================================
# SSL/TLS Configuration
# =============================================================================
SSL_CERT_PATH=/etc/ssl/certs/workbook.crt
SSL_KEY_PATH=/etc/ssl/private/workbook.key
SSL_CA_PATH=/etc/ssl/certs/ca-bundle.crt

# =============================================================================
# Session Configuration
# =============================================================================
SESSION_SECRET=your_session_secret_key
SESSION_TIMEOUT=7200000
COOKIE_SECURE=true
COOKIE_SAME_SITE=strict

# =============================================================================
# File Upload Limits
# =============================================================================
MAX_FILE_SIZE=104857600
ALLOWED_FILE_TYPES=audio/mpeg,audio/wav,audio/mp4,audio/m4a,audio/aac

# =============================================================================
# WebSocket Configuration
# =============================================================================
WEBSOCKET_TIMEOUT=60000
WEBSOCKET_PING_INTERVAL=25000
MAX_WEBSOCKET_CONNECTIONS=1000

# =============================================================================
# API Rate Limiting
# =============================================================================
API_RATE_LIMIT_POINTS=100
API_RATE_LIMIT_DURATION=900
API_RATE_LIMIT_BLOCK_DURATION=900

# =============================================================================
# Health Check Configuration
# =============================================================================
HEALTH_CHECK_TIMEOUT=5000
HEALTH_CHECK_INTERVAL=30000

# =============================================================================
# Maintenance Mode
# =============================================================================
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE="System is under maintenance. Please try again later."

# =============================================================================
# Feature Flags
# =============================================================================
ENABLE_LIVE_SESSIONS=true
ENABLE_AUDIO_TRANSCRIPTION=true
ENABLE_COLLABORATIVE_NOTES=true
ENABLE_PERFORMANCE_MONITORING=true
ENABLE_ANALYTICS=true

# =============================================================================
# Geographic Configuration
# =============================================================================
DEFAULT_TIMEZONE=America/New_York
SUPPORTED_LOCALES=en,es,fr

# =============================================================================
# CDN Configuration
# =============================================================================
CDN_URL=https://cdn.6fbmethodologies.com
ASSET_PREFIX=https://cdn.6fbmethodologies.com

# =============================================================================
# Database Connection Pool
# =============================================================================
DB_POOL_MIN=5
DB_POOL_MAX=20
DB_POOL_IDLE_TIMEOUT=30000
DB_POOL_ACQUIRE_TIMEOUT=60000

# =============================================================================
# Redis Configuration Advanced
# =============================================================================
REDIS_MAX_RETRIES_PER_REQUEST=3
REDIS_RETRY_DELAY_ON_FAILURE=100
REDIS_MAX_MEMORY_POLICY=allkeys-lru

# =============================================================================
# Cleanup and Maintenance
# =============================================================================
CLEANUP_TEMP_FILES_CRON="0 3 * * *"
CLEANUP_OLD_SESSIONS_CRON="0 4 * * *"
CLEANUP_LOGS_CRON="0 5 * * SUN"